# vite 的设计理念

为了改变现在打包工具缓慢的启动和缓慢的更新问题

### 缓慢的服务器启动：

冷启动，打包工具要构建好了才能提供给服务器

vite 通过一开始将代码分成：`依赖`和`源码`部分

依赖：是不会改动的纯 js 部分

vite 会使用 esbuild 预构建 依赖部分

源码：是指需要改动的部分，在我们平时的项目中例如：JSX、.vue、less 等。同时不是说所有的模块都要一起加载（基于路由拆分的代码模块）

vite 并不会去打包这些源码，而只进行转换，打包部分交给了浏览器。vite 只负责将源码转换一下交给浏览器，并按需加载当前场景的代码。

### 缓慢的更新

当随着项目越大了，打包工具每次 HRM 又会重新自动打包一次，就会变得越慢

vite 的 HRM 实在原生 ES 上执行的。在编辑文件时，vite 会让其他已经编辑的模块都保持失活的状态，来保证 HRM 最快的响应。

vite 利用浏览器的缓存策略，依赖模块会根据请求头的 `Cache-max-age` 进行强缓存，源码模块的请求会根据`304 No Modified`进行协商缓存
